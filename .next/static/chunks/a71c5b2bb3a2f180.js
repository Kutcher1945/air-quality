(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86810,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(70703),l=e.i(70065),a=e.i(67881),d=e.i(7486),i=e.i(75254);let n=(0,i.default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),c=(0,i.default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),o=(0,r.default)(()=>e.A(4113),{loadableGenerated:{modules:[66148]},ssr:!1}),u={1:"Алатауский район",2:"Алмалинский район",3:"Ауэзовский район",4:"Бостандыкский район",5:"Жетысуский район",6:"Медеуский район",7:"Наурызбайский район",8:"Турксибский район"};function x(){let[e,r]=(0,t.useState)([]),[i,x]=(0,t.useState)(!0),[g,m]=(0,t.useState)(null),[h,b]=(0,t.useState)("all"),[j,f]=(0,t.useState)(""),[p,y]=(0,t.useState)("all");(0,t.useEffect)(()=>{N()},[]);let N=async()=>{try{x(!0),m(null);let e=await fetch("http://localhost:8000/api/v1/address/buildings-without-gas/all-sources/");if(!e.ok)throw Error(`API returned ${e.status}`);let s=await e.json(),t=(s.data||s||[]).map(e=>{let s=(e.category||"").toLowerCase(),t="general";s.includes("ижс")||s.includes("izhs")?t="izhs":(s.includes("сусн")||s.includes("susn"))&&(t="susn");let r=e.district&&"string"==typeof e.district?e.district:e.district_id&&u[String(e.district_id)]?u[String(e.district_id)]:e.district_id?`Район ${e.district_id}`:"Не указан";return{id:e.id?.toString()||crypto.randomUUID(),address:e.address||"Без адреса",district:r,district_id:e.district_id,latitude:e.lat??e.latitude,longitude:e.lon??e.longitude,has_gas:!1,building_type:"izhs"===t?"Индивидуальное жилищное строительство":"susn"===t?"Социально уязвимые слои населения":"Жилое здание",building_category:t,geometry:e.geometry||null}}).filter(e=>e.latitude&&e.longitude);r(t)}catch(e){console.error("Failed to fetch buildings from API:",e),m("Не удалось загрузить данные из API"),r(C())}finally{x(!1)}},C=()=>[{id:"1",address:"ул. Абая, 150",district:"Алмалинский район",latitude:43.2566,longitude:76.9286,has_gas:!1,building_type:"Жилой дом",building_category:"general",floors:9,apartments:72,year_built:1985},{id:"2",address:"пр. Достык, 234",district:"Медеуский район",latitude:43.2378,longitude:76.9458,has_gas:!1,building_type:"Жилой дом",building_category:"general",floors:5,apartments:40,year_built:1978},{id:"3",address:"ул. Тимирязева, 42",district:"Бостандыкский район",latitude:43.2221,longitude:76.8515,has_gas:!1,building_type:"Жилой дом",building_category:"general",floors:12,apartments:144,year_built:1990},{id:"4",address:"ул. Розыбакиева, 180",district:"Алатауский район",latitude:43.2145,longitude:76.8967,has_gas:!1,building_type:"Жилой дом",building_category:"general",floors:16,apartments:192,year_built:2005},{id:"5",address:"мкр. Самал-2, 58",district:"Медеуский район",latitude:43.2456,longitude:76.9567,has_gas:!1,building_type:"Жилой дом",building_category:"general",floors:9,apartments:108,year_built:1988}],v=e.filter(e=>{let s="all"===h||e.district===h,t=""===j||e.address.toLowerCase().includes(j.toLowerCase())||e.district.toLowerCase().includes(j.toLowerCase()),r="all"===p||e.building_category===p;return s&&t&&r}),_=Array.from(new Set(e.map(e=>e.district))).sort(),w={general:e.filter(e=>"general"===e.building_category).length,izhs:e.filter(e=>"izhs"===e.building_category).length,susn:e.filter(e=>"susn"===e.building_category).length},k={general:v.filter(e=>"general"===e.building_category).length,izhs:v.filter(e=>"izhs"===e.building_category).length,susn:v.filter(e=>"susn"===e.building_category).length},z=new Set(e.map(e=>`${e.latitude},${e.longitude}`)).size,S={total:e.length,uniqueMarkers:z,byCategory:{general:w.general,izhs:w.izhs,susn:w.susn},withoutGas:e.filter(e=>!e.has_gas).length,totalApartments:e.reduce((e,s)=>e+(s.apartments||0),0)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("main",{className:"min-h-screen bg-background",children:(0,s.jsxs)("div",{className:"w-full px-4 pb-12 pt-8 md:px-8",children:[(0,s.jsxs)("header",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-orange-500/10",children:(0,s.jsx)(d.Building2,{className:"h-6 w-6 text-orange-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-muted-foreground",children:"Инфраструктура / Алматы"}),(0,s.jsx)("h1",{className:"text-4xl font-bold text-foreground",children:"Здания без газа"})]})]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Карта жилых зданий Алматы, не подключенных к системе газоснабжения"})]}),(0,s.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-4 md:grid-cols-4",children:[(0,s.jsx)(l.Card,{className:"bg-card border-border",children:(0,s.jsx)(l.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Всего уникальных зданий"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-foreground",children:S.uniqueMarkers})]}),(0,s.jsx)(d.Building2,{className:"h-8 w-8 text-muted-foreground"})]})})}),(0,s.jsx)(l.Card,{className:"bg-card border-border",children:(0,s.jsx)(l.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"ALSECO"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-orange-500",children:S.byCategory.general})]}),(0,s.jsx)(c,{className:"h-8 w-8 text-orange-500"})]})})}),(0,s.jsx)(l.Card,{className:"bg-card border-border",children:(0,s.jsx)(l.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"ИЖС"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-blue-500",children:S.byCategory.izhs})]}),(0,s.jsx)(d.Building2,{className:"h-8 w-8 text-blue-500"})]})})}),(0,s.jsx)(l.Card,{className:"bg-card border-border",children:(0,s.jsx)(l.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"СУСН"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-red-500",children:S.byCategory.susn})]}),(0,s.jsx)(n,{className:"h-8 w-8 text-red-500"})]})})})]}),(0,s.jsxs)(l.Card,{className:"mb-8 bg-card border-border",children:[(0,s.jsx)(l.CardHeader,{className:"border-b border-border",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l.CardTitle,{className:"text-2xl",children:"Интерактивная карта"}),(0,s.jsxs)(l.CardDescription,{children:[v.length," из ",e.length," зданий отображено"," · ","ИЖС: ",k.izhs,"/",w.izhs," · СУСН: ",k.susn,"/",w.susn," · ALSECO: ",k.general,"/",w.general]})]}),(0,s.jsx)(a.Button,{variant:"outline",size:"sm",onClick:N,children:"Обновить данные"})]})}),(0,s.jsxs)(l.CardContent,{className:"p-4",children:[(0,s.jsxs)("div",{className:"mb-4 grid grid-cols-1 gap-3 md:grid-cols-3",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{className:"text-sm text-muted-foreground",children:"Поиск по адресу"}),(0,s.jsx)("input",{type:"text",value:j,onChange:e=>f(e.target.value),placeholder:"Введите адрес или район",className:"h-10 rounded-md border border-border bg-background px-3 text-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{className:"text-sm text-muted-foreground",children:"Район"}),(0,s.jsxs)("select",{value:h,onChange:e=>b(e.target.value),className:"h-10 rounded-md border border-border bg-background px-3 text-sm",children:[(0,s.jsx)("option",{value:"all",children:"Все районы"}),_.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{className:"text-sm text-muted-foreground",children:"Тип"}),(0,s.jsxs)("select",{value:p,onChange:e=>y(e.target.value),className:"h-10 rounded-md border border-border bg-background px-3 text-sm",children:[(0,s.jsx)("option",{value:"all",children:"Все типы"}),(0,s.jsx)("option",{value:"general",children:"ALSECO"}),(0,s.jsx)("option",{value:"izhs",children:"ИЖС (индивидуальное строительство)"}),(0,s.jsx)("option",{value:"susn",children:"СУСН (соц.уязвимые)"})]})]})]}),i?(0,s.jsx)("div",{className:"flex h-[600px] items-center justify-center text-muted-foreground",children:"Загрузка карты..."}):g?(0,s.jsxs)("div",{className:"flex h-[600px] flex-col items-center justify-center gap-3",children:[(0,s.jsx)(c,{className:"h-12 w-12 text-orange-500"}),(0,s.jsx)("p",{className:"text-red-500 font-semibold",children:g}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Используются тестовые данные для демонстрации"}),(0,s.jsx)(a.Button,{variant:"outline",size:"sm",onClick:N,children:"Попробовать снова"})]}):(0,s.jsx)("div",{className:"h-[600px] w-full",children:(0,s.jsx)(o,{buildings:v})})]})]}),(0,s.jsxs)(l.Card,{className:"mt-8 bg-card border-border",children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardTitle,{className:"text-2xl",children:"Информация"})}),(0,s.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"mb-2 font-semibold text-foreground",children:"О проекте"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Данная карта показывает жилые здания города Алматы, которые не подключены к централизованной системе газоснабжения. Информация обновляется регулярно и может быть использована для планирования инфраструктурных проектов."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"mb-2 font-semibold text-foreground",children:"Альтернативные источники отопления"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Здания без газа обычно используют электрическое отопление, централизованное теплоснабжение или автономные котельные. Это может влиять на стоимость коммунальных услуг и экологическую обстановку."})]})]})]})]})})})}e.s(["default",()=>x],86810)},4113,e=>{e.v(s=>Promise.all(["static/chunks/fca403c9c5654efe.js","static/chunks/1442f9ddf5556540.js","static/chunks/92775ae1698e5da0.css","static/chunks/1459ac4d7a0d5447.css"].map(s=>e.l(s))).then(()=>s(66148)))}]);