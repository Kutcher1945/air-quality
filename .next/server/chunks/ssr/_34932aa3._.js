module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},70551,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(19721),e=a.i(3130),f=a.i(40695),g=a.i(67900),h=a.i(70106);let i=(0,h.default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),j=(0,h.default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),k=(0,d.default)(async()=>{},{loadableGenerated:{modules:[66148]},ssr:!1}),l={1:"Алатауский район",2:"Алмалинский район",3:"Ауэзовский район",4:"Бостандыкский район",5:"Жетысуский район",6:"Медеуский район",7:"Наурызбайский район",8:"Турксибский район"};function m(){let[a,d]=(0,c.useState)([]),[h,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)("all"),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)("all");(0,c.useEffect)(()=>{v()},[]);let v=async()=>{try{m(!0),o(null);let a=await fetch("http://localhost:8000/api/v1/address/buildings-without-gas/all-sources/");if(!a.ok)throw Error(`API returned ${a.status}`);let b=await a.json(),c=(b.data||b||[]).map(a=>{let b=(a.category||"").toLowerCase(),c="general";b.includes("ижс")||b.includes("izhs")?c="izhs":(b.includes("сусн")||b.includes("susn"))&&(c="susn");let d=a.district&&"string"==typeof a.district?a.district:a.district_id&&l[String(a.district_id)]?l[String(a.district_id)]:a.district_id?`Район ${a.district_id}`:"Не указан";return{id:a.id?.toString()||crypto.randomUUID(),address:a.address||"Без адреса",district:d,district_id:a.district_id,latitude:a.lat??a.latitude,longitude:a.lon??a.longitude,has_gas:!1,building_type:"izhs"===c?"Индивидуальное жилищное строительство":"susn"===c?"Социально уязвимые слои населения":"Жилое здание",building_category:c,geometry:a.geometry||null}}).filter(a=>a.latitude&&a.longitude);d(c)}catch(a){console.error("Failed to fetch buildings from API:",a),o("Не удалось загрузить данные из API"),d(w())}finally{m(!1)}},w=()=>[{id:"1",address:"ул. Абая, 150",district:"Алмалинский район",latitude:43.2566,longitude:76.9286,has_gas:!1,building_type:"Жилой дом",building_category:"general",floors:9,apartments:72,year_built:1985},{id:"2",address:"пр. Достык, 234",district:"Медеуский район",latitude:43.2378,longitude:76.9458,has_gas:!1,building_type:"Жилой дом",building_category:"general",floors:5,apartments:40,year_built:1978},{id:"3",address:"ул. Тимирязева, 42",district:"Бостандыкский район",latitude:43.2221,longitude:76.8515,has_gas:!1,building_type:"Жилой дом",building_category:"general",floors:12,apartments:144,year_built:1990},{id:"4",address:"ул. Розыбакиева, 180",district:"Алатауский район",latitude:43.2145,longitude:76.8967,has_gas:!1,building_type:"Жилой дом",building_category:"general",floors:16,apartments:192,year_built:2005},{id:"5",address:"мкр. Самал-2, 58",district:"Медеуский район",latitude:43.2456,longitude:76.9567,has_gas:!1,building_type:"Жилой дом",building_category:"general",floors:9,apartments:108,year_built:1988}],x=a.filter(a=>{let b="all"===p||a.district===p,c=""===r||a.address.toLowerCase().includes(r.toLowerCase())||a.district.toLowerCase().includes(r.toLowerCase()),d="all"===t||a.building_category===t;return b&&c&&d}),y=Array.from(new Set(a.map(a=>a.district))).sort(),z={general:a.filter(a=>"general"===a.building_category).length,izhs:a.filter(a=>"izhs"===a.building_category).length,susn:a.filter(a=>"susn"===a.building_category).length},A={general:x.filter(a=>"general"===a.building_category).length,izhs:x.filter(a=>"izhs"===a.building_category).length,susn:x.filter(a=>"susn"===a.building_category).length},B=new Set(a.map(a=>`${a.latitude},${a.longitude}`)).size,C={total:a.length,uniqueMarkers:B,byCategory:{general:z.general,izhs:z.izhs,susn:z.susn},withoutGas:a.filter(a=>!a.has_gas).length,totalApartments:a.reduce((a,b)=>a+(b.apartments||0),0)};return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("main",{className:"min-h-screen bg-background",children:(0,b.jsxs)("div",{className:"w-full px-4 pb-12 pt-8 md:px-8",children:[(0,b.jsxs)("header",{className:"mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-orange-500/10",children:(0,b.jsx)(g.Building2,{className:"h-6 w-6 text-orange-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-muted-foreground",children:"Инфраструктура / Алматы"}),(0,b.jsx)("h1",{className:"text-4xl font-bold text-foreground",children:"Здания без газа"})]})]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Карта жилых зданий Алматы, не подключенных к системе газоснабжения"})]}),(0,b.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-4 md:grid-cols-4",children:[(0,b.jsx)(e.Card,{className:"bg-card border-border",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Всего уникальных зданий"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-foreground",children:C.uniqueMarkers})]}),(0,b.jsx)(g.Building2,{className:"h-8 w-8 text-muted-foreground"})]})})}),(0,b.jsx)(e.Card,{className:"bg-card border-border",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"ALSECO"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-orange-500",children:C.byCategory.general})]}),(0,b.jsx)(j,{className:"h-8 w-8 text-orange-500"})]})})}),(0,b.jsx)(e.Card,{className:"bg-card border-border",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"ИЖС"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-blue-500",children:C.byCategory.izhs})]}),(0,b.jsx)(g.Building2,{className:"h-8 w-8 text-blue-500"})]})})}),(0,b.jsx)(e.Card,{className:"bg-card border-border",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"СУСН"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-red-500",children:C.byCategory.susn})]}),(0,b.jsx)(i,{className:"h-8 w-8 text-red-500"})]})})})]}),(0,b.jsxs)(e.Card,{className:"mb-8 bg-card border-border",children:[(0,b.jsx)(e.CardHeader,{className:"border-b border-border",children:(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(e.CardTitle,{className:"text-2xl",children:"Интерактивная карта"}),(0,b.jsxs)(e.CardDescription,{children:[x.length," из ",a.length," зданий отображено"," · ","ИЖС: ",A.izhs,"/",z.izhs," · СУСН: ",A.susn,"/",z.susn," · ALSECO: ",A.general,"/",z.general]})]}),(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:v,children:"Обновить данные"})]})}),(0,b.jsxs)(e.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"mb-4 grid grid-cols-1 gap-3 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground",children:"Поиск по адресу"}),(0,b.jsx)("input",{type:"text",value:r,onChange:a=>s(a.target.value),placeholder:"Введите адрес или район",className:"h-10 rounded-md border border-border bg-background px-3 text-sm"})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground",children:"Район"}),(0,b.jsxs)("select",{value:p,onChange:a=>q(a.target.value),className:"h-10 rounded-md border border-border bg-background px-3 text-sm",children:[(0,b.jsx)("option",{value:"all",children:"Все районы"}),y.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground",children:"Тип"}),(0,b.jsxs)("select",{value:t,onChange:a=>u(a.target.value),className:"h-10 rounded-md border border-border bg-background px-3 text-sm",children:[(0,b.jsx)("option",{value:"all",children:"Все типы"}),(0,b.jsx)("option",{value:"general",children:"ALSECO"}),(0,b.jsx)("option",{value:"izhs",children:"ИЖС (индивидуальное строительство)"}),(0,b.jsx)("option",{value:"susn",children:"СУСН (соц.уязвимые)"})]})]})]}),h?(0,b.jsx)("div",{className:"flex h-[600px] items-center justify-center text-muted-foreground",children:"Загрузка карты..."}):n?(0,b.jsxs)("div",{className:"flex h-[600px] flex-col items-center justify-center gap-3",children:[(0,b.jsx)(j,{className:"h-12 w-12 text-orange-500"}),(0,b.jsx)("p",{className:"text-red-500 font-semibold",children:n}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Используются тестовые данные для демонстрации"}),(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:v,children:"Попробовать снова"})]}):(0,b.jsx)("div",{className:"h-[600px] w-full",children:(0,b.jsx)(k,{buildings:x})})]})]}),(0,b.jsxs)(e.Card,{className:"mt-8 bg-card border-border",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{className:"text-2xl",children:"Информация"})}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"mb-2 font-semibold text-foreground",children:"О проекте"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Данная карта показывает жилые здания города Алматы, которые не подключены к централизованной системе газоснабжения. Информация обновляется регулярно и может быть использована для планирования инфраструктурных проектов."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"mb-2 font-semibold text-foreground",children:"Альтернативные источники отопления"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Здания без газа обычно используют электрическое отопление, централизованное теплоснабжение или автономные котельные. Это может влиять на стоимость коммунальных услуг и экологическую обстановку."})]})]})]})]})})})}a.s(["default",()=>m],70551)}];

//# sourceMappingURL=_34932aa3._.js.map